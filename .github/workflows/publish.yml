    name: Publish NPM Package

    on:
      release:
        types: [published] # This workflow runs when a new release is published

    jobs:
      build-and-publish:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout code
            uses: actions/checkout@v4

          - name: Set up Node.js
            uses: actions/setup-node@v4
            with:
              node-version: '22'
              registry-url: 'https://npm.pkg.github.com'

          - name: Install dependencies
            run: npm ci

          - name: Build package
            run: npm run build

          - name: Publish to GitHub Packages
            run: npm publish
            env:
              NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
